{% extends "layouts/main.html" %}

{% block pageTitle %}
  Report ready
{% endblock %}

{% block content %}

<a href="/rm-location" class="govuk-back-link">Back</a>

{% from "govuk/components/panel/macro.njk" import govukPanel %}

{{ govukPanel({
  titleText: "Report ready"
}) }}

<p class="govuk-body">Your report is ready. We have sent you a confirmation email.</p>
<p class="govuk-body">You can come back to this page using the following link.</p>

<p>
  <a href="#">
    https://hmpps-edmi-prototype-v3.onrender.com/rm-report-ready
  </a>
</p>

<h2 class="govuk-heading-m">Report summary</h2>

{% if data["rm-report-start-datetime"] %}
  {% set startFormatted = data["rm-report-start-datetime"] | date("d MMMM yyyy h:mma") %}
{% else %}
  {% set startFormatted = "Not set" %}
{% endif %}

{% if data["rm-report-requested-at"] %}
  {% set requestedFormatted = data["rm-report-requested-at"] | date("d MMMM yyyy h:mma") %}
{% else %}
  {% set requestedFormatted = "Not recorded" %}
{% endif %}

{{ govukSummaryList({
  rows: [
    {
        key:   { text: "Report start date and time" },
        value: { text: data["rm-report-start-label"] or "Not set" }
    },
    {
      key: { text: "Report length" },
      value: {
        text: data["rm-report-length"] or "7 days"
      }
    },
    {
      key: { text: "Hours shown per map" },
      value: {
        text: data["rm-report-hours-per-map"] or "6 hours"
      }
    },
        {
        key:   { text: "Date and time requested" },
        value: { text: data["rm-report-requested-label"] or "Not recorded" }
        }
  ]
}) }}

<h2 class="govuk-heading-m">Download report</h2>
<div class="app-attachment">

{% set filename = data["rm-report-filename"] or "HMPPS-trail-monitoring-report.pdf" %}

  <div class="app-attachment__thumbnail">
    <a href="/public/downloads/trail-report.pdf"
     class="govuk-link"
     download="{{ filename }}">
      <svg class="gem-c-attachment__thumbnail-image gem-c-attachment__thumbnail-image--pdf" version="1.1" viewBox="0 0 99 140">
  <path d="M12,59h9v9h-9v-9ZM30,77v9h39v-9H30ZM30,104h57v-9H30v9ZM30,122h48v-9H30v9ZM12,86h9v-9h-9v9ZM12,122h9v-9h-9v9ZM12,104h9v-9h-9v9ZM30,68h57v-9H30v9ZM35.2,21c-.3-.2-.6-.4-1-.5s-.8-.2-1.3-.2h-2.6v5.5h2.6c.5,0,1,0,1.3-.2s.7-.3,1-.5c.3-.2.5-.5.7-.8s.2-.7.2-1.1h0c0-.5,0-.9-.2-1.2-.2-.3-.4-.6-.7-.8h0ZM52.4,21.9c-.4-.5-1-.9-1.6-1.1-.7-.3-1.5-.4-2.4-.4h-2.7v11.5h2.7c.9,0,1.7-.1,2.4-.4s1.2-.7,1.6-1.1c.4-.5.7-1.1.9-1.7.2-.7.3-1.4.3-2.1v-.7c0-.8,0-1.5-.3-2.1-.2-.6-.5-1.2-.9-1.7h0ZM87,12v27H12V12h75ZM39.8,23c0-.9-.1-1.6-.4-2.4-.3-.7-.7-1.4-1.2-1.9-.5-.5-1.2-1-1.9-1.2-.8-.3-1.6-.5-2.5-.5h-7.2v17.9h3.6v-6h3.2c.9,0,1.8-.1,2.6-.5.8-.3,1.4-.7,2-1.2.5-.5,1-1.2,1.3-1.9.3-.7.5-1.5.5-2.4h0ZM57.4,26c0-1.3-.2-2.6-.5-3.7s-.9-2-1.6-2.8c-.7-.8-1.6-1.4-2.7-1.8-1.1-.4-2.3-.6-3.8-.6h-6.6v17.9h6.6c1.5,0,2.7-.2,3.8-.6,1.1-.4,2-1,2.7-1.8.7-.8,1.3-1.7,1.6-2.8.4-1.1.5-2.3.5-3.7h0ZM72.4,17.1h-12.1v17.9h3.6v-7.5h7.8v-3.3h-7.8v-3.8h8.4s0-3.3,0-3.3Z"></path>
    </a>
  </div>

  <div class="app-attachment__details">
    <h3 class="govuk-heading-s govuk-!-margin-bottom-1">
    <a href="/public/downloads/trail-report.pdf"
        class="govuk-link"
        download="{{ filename }}">
        {{ filename }}
    </a>
    </h3>

    <p class="govuk-body govuk-!-margin-bottom-1">
      PDF, 19.5KB, 7 pages
    </p>
  </div>

</div>


<p><a class="govuk-link" href="/rm-location">Back to home</a></p>
<p><a class="govuk-link" href="/rm-create-report">Create another report</a></p>

{% endblock %}
